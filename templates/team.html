<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>íŒ€ ì½”ë“œ ì…ë ¥</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen px-4">
  <div class="bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-md">
    <h1 class="text-2xl font-bold mb-6 text-center">íŒ€ ì½”ë“œ ì„¤ì •</h1>

    <!-- íŒ€ ì½”ë“œ ì…ë ¥ í¼ (ì´ì œ í•„ìˆ˜ ì•„ë‹˜) -->
    <form method="post" action="{{ url_for('set_team_code') }}" class="flex gap-2 mb-4">
        <input type="text" name="team_code" placeholder="(ì„ íƒ) íŒ€ ì½”ë“œ ì…ë ¥ - ê°œì¸ì€ ìƒëµ ê°€ëŠ¥"
        class="border p-3 rounded w-full text-black">
 
        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded text-base w-24">
            ë‹¤ìŒ
        </button>
          
    </form>

    <!-- íŒ€ ì½”ë“œ ìë™ ìƒì„± ë²„íŠ¼ -->
    <div class="text-center mb-4">
        <button onclick="generateCode()" class="bg-gray-700 text-white px-3 py-1 rounded hover:bg-gray-600 text-sm">
          ğŸ”„ ì½”ë“œ ìƒì„±
        </button>
    </div>

    <!-- âœ… íŒ€ ê²°ê³¼ ë¯¸ë¦¬ ë³´ê¸° ë²„íŠ¼ -->
    <form method="get" action="" id="previewForm" class="text-center">
      <button type="submit"
              class="text-blue-400 underline hover:text-blue-200 text-sm"
              onclick="event.preventDefault(); goToResult();">
        ğŸ” í˜„ì¬ íŒ€ ê²°ê³¼ ë¯¸ë¦¬ ë³´ê¸°
      </button>
    </form>
  </div>

  <script>
    function generateCode() {
      fetch("/generate_team_code")
        .then(response => response.json())
        .then(data => {
          document.querySelector('input[name="team_code"]').value = data.code;
        });
    }

    function goToResult() {
      const code = document.querySelector('input[name="team_code"]').value.trim();
      if (code) {
        window.location.href = `/team_result/${code}`;
      } else {
        alert("ë¨¼ì € íŒ€ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
      }
    }
  </script>
</body>
</html>
